<!-- components/Contacto.astro -->

---
// Lógica de JavaScript en el frontmatter actualizada
const shareUrl = 'https://www.LlakaScript.com';
const title = 'Soluciones Tecnológicas para tu Empresa | LlakaScript';
const phoneNumber = '+5492612444106';
const platforms = [
  { 
    name: 'WhatsApp', 
    icon: 'https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg', 
    url: `https://api.whatsapp.com/send?phone=${phoneNumber}&text=${encodeURIComponent('Hola! Me interesa conocer más sobre sus servicios tecnológicos.')}` 
  },
  { 
    name: 'LinkedIn', 
    icon: 'https://upload.wikimedia.org/wikipedia/commons/8/81/LinkedIn_icon.svg', 
    url: 'https://www.linkedin.com/in/nicolas-contigliani/' 
  },
  { 
    name: 'Email', 
    icon: 'https://upload.wikimedia.org/wikipedia/commons/7/7e/Gmail_icon_%282020%29.svg', 
    url: 'mailto:nico.contigliani@gmail.com?subject=Consulta%20sobre%20servicios%20tecnológicos&body=Hola!%20Me%20interesa%20conocer%20más%20sobre%20sus%20servicios.' 
  },
  { 
    name: 'Twitter', 
    icon: 'https://upload.wikimedia.org/wikipedia/commons/6/6f/Logo_of_Twitter.svg', 
    url: `https://twitter.com/intent/tweet?url=${encodeURIComponent(shareUrl)}&text=${encodeURIComponent(title)}` 
  },
];
---

<section id="contacto" class="wave-contact-section">
  <!-- Ondas elegantes mejoradas -->
  <div class="waves-container" aria-hidden="true">
    <div class="wave -one"></div>
    <div class="wave -two"></div>
    <div class="wave -three"></div>
    <div class="wave -four"></div>
  </div>
  
  <div class="container">
    <div class="contact-content">
      <div class="contact-header" data-animate="fade-in-up">
        <span class="contact-subtitle">Conectemos</span>
        <h2 class="contact-title">Hablemos sobre tu próximo proyecto</h2>
        <p class="contact-description">
          ¿Tienes una visión o necesitas optimizar tus procesos?
          Conectemos a través de nuestras redes.
        </p>
      </div>

      <div class="share-container">
        <div class="share-buttons-grid">
          {platforms.map((platform, index) => (
            <div class="share-button-wrapper" data-animate="fade-in-scale" data-delay={200 + (index * 100)}>
              <a href={platform.url} target="_blank" rel="noopener noreferrer" class="wave-share-button">
                <div class="button-content">
                  <img src={platform.icon} alt={`${platform.name} Icon`} width="42" height="42" />
                  <span class="button-label">{platform.name}</span>
                </div>
                <div class="button-hover-effect"></div>
              </a>
            </div>
          ))}
        </div>
      </div>

      <div class="contact-info" data-animate="fade-in-up" data-delay="600">
        <p class="info-text">O escríbenos directamente a:</p>
        <div class="contact-links">
          <a href="mailto:nico.contigliani@gmail.com" class="contact-link email-link">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
              <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
            </svg>
            nico.contigliani@gmail.com
          </a>
          <a href={`https://api.whatsapp.com/send?phone=${phoneNumber}`} class="contact-link whatsapp-link">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
              <path d="M16.75 13.96c.25.13.41.2.46.3.06.11.04.61-.21 1.18-.2.56-1.24 1.1-1.7 1.12-.46.02-.47.36-2.96-.73-2.49-1.09-3.99-3.75-4.11-3.92-.12-.17-.96-1.38-.92-2.61.05-1.22.69-1.8.95-2.04.24-.26.51-.29.68-.26h.47c.15 0 .36-.06.55.45l.69 1.87c.06.13.1.28.01.44l-.27.41-.39.42c-.12.12-.26.25-.12.5.12.26.62 1.09 1.32 1.78.91.88 1.71 1.17 1.95 1.3.24.14.39.12.54-.04l.81-.94c.19-.25.35-.19.58-.11l1.67.88M12 2a10 10 0 0 1 10 10 10 10 0 0 1-10 10c-1.97 0-3.8-.57-5.35-1.55L2 22l1.55-4.65A9.969 9.969 0 0 1 2 12 10 10 0 0 1 12 2m0 2a8 8 0 0 0-8 8c0 1.72.54 3.31 1.46 4.61L4.5 19.5l2.89-.96A7.95 7.95 0 0 0 12 20a8 8 0 0 0 8-8 8 8 0 0 0-8-8z"/>
            </svg>
            +54 9 261 244-4106
          </a>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  /* Variables CSS optimizadas y mejoradas */
  :root {
    --gradient-bg: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
    --wave-color-1: rgba(255, 255, 255, 0.08);
    --wave-color-2: rgba(100, 200, 255, 0.12);
    --wave-color-3: rgba(70, 130, 180, 0.10);
    --wave-color-4: rgba(255, 255, 255, 0.05);

    --text-primary: #ffffff;
    --text-secondary: #e0e0e0;
    --text-tertiary: #888;
    --accent-color: #4dabf7;
    --accent-hover: #74c0fc;
    --card-bg: rgba(255, 255, 255, 0.95);
    --shadow-light: 0 8px 32px rgba(0, 0, 0, 0.1);
    --shadow-medium: 0 15px 50px rgba(0, 0, 0, 0.2);
    --radius: 16px;
    --radius-full: 50px;
    --transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    --section-padding: clamp(3rem, 8vw, 6rem);
  }

  .wave-contact-section {
    padding: var(--section-padding) 0;
    background: var(--gradient-bg);
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    color: var(--text-primary);
    position: relative;
    overflow: hidden;
    isolation: isolate;
  }

  /* Ondas elegantes mejoradas */
  .waves-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
    z-index: 1;
    pointer-events: none;
    filter: blur(8px);
  }

  .wave {
    position: absolute;
    bottom: 0;
    left: -10%;
    width: 120%;
    height: 35%;
    background: linear-gradient(90deg, 
      transparent 0%, 
      var(--wave-color) 20%, 
      var(--wave-color) 80%, 
      transparent 100%);
    border-radius: 50% 50% 0 0;
    transform-origin: 50% 100%;
    will-change: transform;
    animation: waveElegant 25s infinite linear;
    opacity: 0.8;
  }

  .wave.-one {
    --wave-color: var(--wave-color-1);
    animation-duration: 20s;
    animation-delay: 0s;
    height: 40%;
    bottom: -5%;
  }

  .wave.-two {
    --wave-color: var(--wave-color-2);
    animation-duration: 25s;
    animation-delay: -5s;
    height: 35%;
    bottom: 0;
  }

  .wave.-three {
    --wave-color: var(--wave-color-3);
    animation-duration: 30s;
    animation-delay: -10s;
    height: 30%;
    bottom: 5%;
  }
  
  .wave.-four {
    --wave-color: var(--wave-color-4);
    animation-duration: 35s;
    animation-delay: -15s;
    height: 25%;
    bottom: 10%;
  }

  @keyframes waveElegant {
    0% {
      transform: translateX(0) scaleY(1) scaleX(1);
    }
    25% {
      transform: translateX(-5%) scaleY(1.05) scaleX(1.02);
    }
    50% {
      transform: translateX(-10%) scaleY(1.1) scaleX(1.05);
    }
    75% {
      transform: translateX(-5%) scaleY(1.05) scaleX(1.02);
    }
    100% {
      transform: translateX(0) scaleY(1) scaleX(1);
    }
  }

  .wave::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: radial-gradient(ellipse at center, 
      rgba(255,255,255,0.15) 0%, 
      transparent 70%);
    border-radius: inherit;
  }

  .container {
    max-width: min(1200px, 90vw);
    margin: 0 auto;
    padding: 0 clamp(1rem, 4vw, 3rem);
    position: relative;
    z-index: 2;
  }

  .contact-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: clamp(2rem, 5vw, 4rem);
  }

  .contact-header {
    text-align: center;
    max-width: min(700px, 90vw);
  }

  .contact-subtitle {
    display: block;
    font-size: clamp(0.8rem, 2vw, 0.9rem);
    font-weight: 600;
    color: var(--accent-color);
    text-transform: uppercase;
    letter-spacing: 0.15em;
    margin-bottom: 1rem;
  }

  .contact-title {
    font-size: clamp(2.2rem, 6vw, 3.5rem);
    font-weight: 300;
    letter-spacing: -0.02em;
    margin: 0 0 1.5rem 0;
    color: var(--text-primary);
    line-height: 1.1;
    background: linear-gradient(135deg, #ffffff 0%, #e0e0e0 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .contact-description {
    font-size: clamp(1.1rem, 3vw, 1.3rem);
    line-height: 1.6;
    color: var(--text-secondary);
    margin: 0;
    font-weight: 300;
    opacity: 0.9;
  }

  .share-container {
    width: 100%;
    max-width: min(900px, 90vw);
  }

  .share-buttons-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(min(200px, 100%), 1fr));
    gap: clamp(1rem, 3vw, 1.5rem);
    justify-content: center;
  }

  .share-button-wrapper {
    transition: var(--transition);
    border-radius: var(--radius);
    background: var(--card-bg);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    box-shadow: var(--shadow-light);
    cursor: pointer;
    position: relative;
    overflow: hidden;
    will-change: transform, box-shadow;
  }

  .share-button-wrapper::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, 
      transparent, 
      rgba(77, 171, 247, 0.1), 
      transparent
    );
    transition: left 0.8s ease;
  }

  .share-button-wrapper:hover {
    transform: translateY(-8px) scale(1.02);
    box-shadow: var(--shadow-medium);
    border-color: rgba(77, 171, 247, 0.3);
  }

  .share-button-wrapper:hover::before {
    left: 100%;
  }

  .wave-share-button {
    width: 100%;
    height: 100%;
    border: none;
    background: transparent;
    cursor: pointer;
    border-radius: calc(var(--radius) - 2px);
    padding: clamp(1.5rem, 4vw, 2rem) 1rem;
    display: flex;
    justify-content: center;
    align-items: center;
    text-decoration: none;
    color: inherit;
    position: relative;
    z-index: 2;
  }

  .button-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1rem;
    position: relative;
    z-index: 2;
  }

  .button-content img {
    filter: grayscale(0.4);
    transition: var(--transition);
    width: clamp(2.5rem, 6vw, 3.5rem);
    height: clamp(2.5rem, 6vw, 3.5rem);
  }

  .share-button-wrapper:hover .button-content img {
    filter: grayscale(0);
    transform: scale(1.15) rotate(5deg);
  }

  .button-label {
    font-size: clamp(0.9rem, 2.5vw, 1.1rem);
    font-weight: 600;
    color: #333;
    transition: var(--transition);
    letter-spacing: -0.01em;
  }

  .share-button-wrapper:hover .button-label {
    color: var(--accent-color);
    transform: translateY(2px);
  }

  .button-hover-effect {
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, 
      transparent, 
      rgba(77, 171, 247, 0.05), 
      transparent
    );
    transition: left 0.6s ease;
  }

  .share-button-wrapper:hover .button-hover-effect {
    left: 100%;
  }

  .contact-info {
    text-align: center;
    margin-top: 1rem;
    padding-top: 2rem;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    width: 100%;
    max-width: 600px;
  }

  .info-text {
    font-size: clamp(1rem, 2.5vw, 1.1rem);
    color: var(--text-secondary);
    margin-bottom: 1.5rem;
    font-weight: 300;
  }

  .contact-links {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    align-items: center;
  }

  .contact-link {
    display: inline-flex;
    align-items: center;
    gap: 0.75rem;
    font-size: clamp(1.1rem, 3vw, 1.3rem);
    color: var(--accent-color);
    text-decoration: none;
    font-weight: 400;
    transition: var(--transition);
    position: relative;
    padding: 0.5rem 1rem;
    border-radius: var(--radius-full);
    background: rgba(77, 171, 247, 0.1);
    border: 1px solid transparent;
  }

  .contact-link:hover {
    color: var(--accent-hover);
    background: rgba(77, 171, 247, 0.15);
    border-color: rgba(77, 171, 247, 0.3);
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(77, 171, 247, 0.2);
  }

  .contact-link svg {
    transition: var(--transition);
  }

  .contact-link:hover svg {
    transform: scale(1.1);
  }

  .whatsapp-link:hover {
    background: rgba(37, 211, 102, 0.1);
    border-color: rgba(37, 211, 102, 0.3);
    box-shadow: 0 5px 15px rgba(37, 211, 102, 0.2);
  }

  /* Animaciones optimizadas */
  @media (prefers-reduced-motion: no-preference) {
    [data-animate] {
      opacity: 0;
      transform: translateY(30px);
      transition: 
        opacity 0.8s cubic-bezier(0.4, 0, 0.2, 1),
        transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    [data-animate="fade-in-up"] {
        transform: translateY(30px);
    }

    [data-animate="fade-in-scale"] {
        transform: scale(0.9);
    }

    [data-animate].animated {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
    
    [data-animate].animated[data-delay] {
      transition-delay: var(--delay);
    }
  }

  @media (prefers-reduced-motion: reduce) {
    .wave {
      animation: none;
      opacity: 0.1;
    }
    
    .share-button-wrapper,
    .contact-link {
      transition: none;
    }
    
    .share-button-wrapper:hover {
      transform: none;
    }
  }

  /* Responsive Design Mejorado */
  @media (max-width: 768px) {
    .wave-contact-section {
      padding: clamp(2rem, 6vw, 3rem) 0;
    }

    .share-buttons-grid {
      grid-template-columns: repeat(2, 1fr);
      gap: 1rem;
    }

    .contact-links {
      flex-direction: column;
      align-items: center;
    }

    .contact-link {
      font-size: 1.1rem;
      padding: 0.75rem 1.5rem;
    }
  }

  @media (max-width: 480px) {
    .share-buttons-grid {
      grid-template-columns: 1fr;
      max-width: 280px;
      margin: 0 auto;
    }

    .container {
      padding: 0 1rem;
    }
    
    .waves-container {
      display: none;
    }

    .contact-link {
      font-size: 1rem;
      padding: 0.6rem 1.2rem;
    }
  }

  /* Efectos de enfoque para accesibilidad */
  .wave-share-button:focus-visible,
  .contact-link:focus-visible {
    outline: 2px solid var(--accent-color);
    outline-offset: 2px;
  }
</style>
<script>
  // Script optimizado para performance y animaciones
  document.addEventListener('DOMContentLoaded', () => {
    'use strict';
    
    const observerOptions = {
      root: null,
      rootMargin: '50px',
      threshold: 0.1
    };
    
    let observer:any; // Explicitly no type here, letting it be inferred or staying dynamic
    
    const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    
    if (!prefersReducedMotion) {
      observer = new IntersectionObserver((entries) => {
        entries.forEach((entry:any) => {
          if (entry.isIntersecting) {
            const delay = entry.target.dataset.delay || '0';
            entry.target.style.setProperty('--delay', `${delay}ms`);
            entry.target.classList.add('animated');
            observer.unobserve(entry.target);
          }
        });
      }, observerOptions);
      
      const animatedElements = document.querySelectorAll('[data-animate]');
      animatedElements.forEach(el => observer.observe(el));
    } else {
      const animatedElements = document.querySelectorAll('[data-animate]');
      animatedElements.forEach(el => el.classList.add('animated'));
    }
    
    // Smooth scroll para enlaces internos
    document.querySelectorAll('a[href^="#"]').forEach((anchor:any) => {
      // Corrected the type of 'e' to be a MouseEvent
      anchor.addEventListener('click', function (e: MouseEvent) {
        e.preventDefault();
        // The type of 'this' is HTMLElement here, but we can access `href` directly from `anchor`.
        const target = document.querySelector(anchor.getAttribute('href'));
        if (target) {
          target.scrollIntoView({
            behavior: 'smooth',
            block: 'start'
          });
        }
      });
    });
    
    window.addEventListener('beforeunload', () => {
      if (observer) {
        observer.disconnect();
      }
    });
  });
</script>